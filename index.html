<!DOCTYPE html>
<html lang="en">
  <head> </head>
  <body>
    <div class="root"></div>

    <canvas width="50" height="50" id="canvas"></canvas>
    <script type="module">
      // canvas
      const canvasElement = document.querySelector("canvas");
      const canvasContext = canvasElement.getContext("2d");

      // wasm

      const importObject = {
        imports: {
          imported_func(arg) {
            console.log(arg);
          },
        },
      };

      const memory = new WebAssembly.Memory({
        initial: 10,
        maximum: 100,
      });
      const wasmModule = await WebAssembly.instantiateStreaming(
        fetch("./build/release.wasm"),
        {
          // main: {
          //   sayHello() {
          //     console.log("Hello from WebAssembly!");
          //   },
          // },
          env: {
            abort(_msg, _file, line, column) {
              console.error("abort called at main.ts:" + line + ":" + column);
            },
          },
        }
      ).then((obj) => {
        let data = obj.instance.exports.getData();
        console.log(data);
      });
    </script>
  </body>
</html>
